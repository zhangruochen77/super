{"ast":null,"code":"import inOrderApi from '@/api/warehouse/InOrderApi';\nimport adminApi from '@/api/admin/Admin';\nexport default {\n  name: \"InOrder\",\n\n  data() {\n    return {\n      inOrderList: [],\n      page: 1,\n      limit: 5,\n      total: 0,\n      inOrderQueryVo: {\n        goodsId: '',\n        adminId: '',\n        timeStart: '',\n        timeEnd: ''\n      },\n      searchUsername: '',\n      detailOrder: {\n        id: '',\n        goodsId: '',\n        number: 0,\n        inTime: '',\n        goodsName: '',\n        img: '',\n        adminUsername: '',\n        adminId: ''\n      },\n      detailOrderVisible: false,\n      adminList: []\n    };\n  },\n\n  created() {\n    this.pageFind();\n  },\n\n  methods: {\n    pageFind() {\n      // 分页条件查找商品信息\n      let timeStart = this.inOrderQueryVo.timeStart;\n      let timeEnd = this.inOrderQueryVo.timeEnd;\n\n      if (timeStart && timeEnd) {\n        let start = new Date(timeStart);\n        let end = new Date(timeEnd);\n\n        if (start > end) {\n          this.$message.error('时间范围错误！');\n          return;\n        }\n      }\n\n      inOrderApi.pageFind(this.page, this.limit, this.inOrderQueryVo).then(resp => {\n        this.inOrderList = resp.data.data.data;\n        this.total = resp.data.data.total;\n      });\n    },\n\n    handleSizeChange(limit) {\n      // 页数发生变化\n      this.limit = limit;\n      this.pageFind();\n    },\n\n    handleCurrentChange(page) {\n      // 当前页发生变化\n      this.page = page;\n      this.pageFind();\n    },\n\n    deleteInOrder(inOrder) {\n      // 删除入库记录\n      this.$confirm('此操作将永久删除[' + inOrder.id + ']入库订单信息, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        inOrderApi.deleteById(inOrder.id).then(resp => {\n          if (resp.data.code == 200) {\n            this.pageFind();\n          } else {\n            this.$message.error('服务器开了点小差！');\n          }\n        });\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '已取消删除'\n        });\n      });\n    },\n\n    showDetailOrder(detailOrder) {\n      // 展示入库订单详细信息\n      Object.assign(this.detailOrder, detailOrder);\n      this.detailOrderVisible = true;\n    },\n\n    exportExcel() {\n      // 将选中的数据进行导出\n      this.$confirm('此操作将导出' + this.total + '条数据, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {// todo 导出表格\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '已取消数据导出'\n        });\n      });\n    },\n\n    listAdminByRoleId(roleId = 2) {\n      // 通过角色获取所有管理员的信息\n      adminApi.listAdminByRoleId(roleId).then(resp => {\n        this.adminList = resp.data.data;\n        this.adminList.push({\n          id: null,\n          name: '全部',\n          username: '全部'\n        });\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAmIA;AACA;AAEA;EACAA,eADA;;EAEAC;IACA;MACAC,eADA;MAEAC,OAFA;MAGAC,QAHA;MAIAC,QAJA;MAKAC;QACAC,WADA;QAEAC,WAFA;QAGAC,aAHA;QAIAC;MAJA,CALA;MAWAC,kBAXA;MAYAC;QACAC,MADA;QAEAN,WAFA;QAGAO,SAHA;QAIAC,UAJA;QAKAC,aALA;QAMAC,OANA;QAOAC,iBAPA;QAQAV;MARA,CAZA;MAsBAW,yBAtBA;MAuBAC;IAvBA;EAyBA,CA5BA;;EA6BAC;IACA;EACA,CA/BA;;EAgCAC;IACAC;MAAA;MACA;MACA;;MAEA;QACA;QACA;;QACA;UACA;UACA;QACA;MACA;;MAEAC;QACA;QACA;MACA,CAHA;IAIA,CAlBA;;IAmBAC;MAAA;MACA;MACA;IACA,CAtBA;;IAuBAC;MAAA;MACA;MACA;IACA,CA1BA;;IA2BAC;MAAA;MACA;QACAC,uBADA;QAEAC,sBAFA;QAGAC;MAHA,GAIAC,IAJA,CAIA;QACAP;UACA;YACA;UACA,CAFA,MAEA;YACA;UACA;QACA,CANA;MAOA,CAZA,EAYAQ,KAZA,CAYA;QACA;UACAF,YADA;UAEAG;QAFA;MAIA,CAjBA;IAkBA,CA9CA;;IA+CAC;MAAA;MACAC;MACA;IACA,CAlDA;;IAmDAC;MAAA;MACA;QACAR,uBADA;QAEAC,sBAFA;QAGAC;MAHA,GAIAC,IAJA,CAIA,OACA;MACA,CANA,EAMAC,KANA,CAMA;QACA;UACAF,YADA;UAEAG;QAFA;MAIA,CAXA;IAYA,CAhEA;;IAiEAI;MAAA;MACAC;QACA;QACA;UAAAzB;UAAAb;UAAAuC;QAAA;MACA,CAHA;IAIA;;EAtEA;AAhCA","names":["name","data","inOrderList","page","limit","total","inOrderQueryVo","goodsId","adminId","timeStart","timeEnd","searchUsername","detailOrder","id","number","inTime","goodsName","img","adminUsername","detailOrderVisible","adminList","created","methods","pageFind","inOrderApi","handleSizeChange","handleCurrentChange","deleteInOrder","confirmButtonText","cancelButtonText","type","then","catch","message","showDetailOrder","Object","exportExcel","listAdminByRoleId","adminApi","username"],"sourceRoot":"src/views/warehouse","sources":["InOrder.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <div class=\"in-order-header\">\r\n            <div>\r\n                <div class=\"in-order-search\">\r\n                    <el-input v-model=\"inOrderQueryVo.goodsId\" placeholder=\"商品编号\"></el-input>\r\n                </div>\r\n                <div class=\"in-order-search\">\r\n                    <el-input v-model=\"searchUsername\" placeholder=\"员工名称\"></el-input>\r\n                </div>\r\n                <div class=\"in-order-search\">\r\n                    <el-date-picker\r\n                            v-model=\"inOrderQueryVo.timeStart\"\r\n                            type=\"datetime\"\r\n                            placeholder=\"起始日期\">\r\n                    </el-date-picker>\r\n                </div>\r\n                <div class=\"in-order-search\">\r\n                    <el-date-picker\r\n                            v-model=\"inOrderQueryVo.timeEnd\"\r\n                            type=\"datetime\"\r\n                            placeholder=\"截至日期\">\r\n                    </el-date-picker>\r\n                </div>\r\n                <div class=\"in-order-search\">\r\n                    <el-button type=\"success\" icon=\"el-icon-search\" plain @click=\"pageFind\"></el-button>\r\n                </div>\r\n                <div class=\"in-order-search\">\r\n                    <el-button type=\"info\" plain @click=\"exportExcel\">导出表格</el-button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"in-order-body\">\r\n            <template>\r\n                <el-table\r\n                        :data=\"inOrderList\"\r\n                        stripe\r\n                        height=\"700px\"\r\n                        style=\"width: 100%\">\r\n                    <el-table-column\r\n                            label=\"图片\"\r\n                            width=\"120%\">\r\n                        <template slot-scope=\"scope\">\r\n                            <el-image\r\n                                    style=\"width: 100px; height: 100px\"\r\n                                    :src=\"scope.row.img\">\r\n                            </el-image>\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"inTime\"\r\n                            label=\"进货时间\"\r\n                            width=\"220%\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"goodsName\"\r\n                            label=\"商品名称\"\r\n                            width=\"180%\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"id\"\r\n                            label=\"订单编号\"\r\n                            width=\"220%\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"adminUsername\"\r\n                            label=\"负责人\"\r\n                            width=\"180\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"number\"\r\n                            label=\"数量\"\r\n                            width=\"180\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            label=\"操作\"\r\n                            width=\"300\">\r\n                        <template slot-scope=\"scope\">\r\n                            <el-button type=\"primary\" plain @click=\"showDetailOrder(scope.row)\">详情</el-button>\r\n                            <el-button type=\"danger\" plain @click=\"deleteInOrder(scope.row)\">删除</el-button>\r\n                        </template>\r\n                    </el-table-column>\r\n                </el-table>\r\n            </template>\r\n        </div>\r\n\r\n        <div>\r\n            <div class=\"block\">\r\n                <el-pagination\r\n                        @size-change=\"handleSizeChange\"\r\n                        @current-change=\"handleCurrentChange\"\r\n                        :page-sizes=\"[5, 10, 15, 20]\"\r\n                        :page-size=\"5\"\r\n                        layout=\"total, sizes, prev, pager, next, jumper\"\r\n                        :total=\"total\">\r\n                </el-pagination>\r\n            </div>\r\n        </div>\r\n\r\n\r\n        <div>\r\n            <el-dialog :visible.sync=\"detailOrderVisible\">\r\n                <el-descriptions title=\"商品信息\">\r\n                    <el-descriptions-item label=\"图片\">\r\n                        <el-image style=\"width: 100px; height: 100px\" :src=\"detailOrder.img\"></el-image>\r\n                    </el-descriptions-item>\r\n                    <el-descriptions-item label=\"订单编号\">{{detailOrder.id}}</el-descriptions-item>\r\n                    <el-descriptions-item label=\"商品编号\">{{detailOrder.goodsId}}</el-descriptions-item>\r\n                    <el-descriptions-item label=\"商品名称\">{{detailOrder.goodsName}}</el-descriptions-item>\r\n                    <el-descriptions-item label=\"数量\">\r\n                        <el-tag type=\"success\" size=\"small\">{{detailOrder.number}}</el-tag>\r\n                    </el-descriptions-item>\r\n                    <el-descriptions-item label=\"入库时间\">\r\n                        <el-tag type=\"success\" size=\"small\">{{detailOrder.inTime}}</el-tag>\r\n                    </el-descriptions-item>\r\n                    <el-descriptions-item label=\"负责人\">\r\n                        <el-tag size=\"small\">{{detailOrder.adminUsername}}</el-tag>\r\n                    </el-descriptions-item>\r\n                    <el-descriptions-item label=\"负责人编号\">{{detailOrder.adminId}}</el-descriptions-item>\r\n                </el-descriptions>\r\n                <div slot=\"footer\" class=\"dialog-footer\">\r\n                    <el-button @click=\"detailOrderVisible = false\">关 闭</el-button>\r\n                </div>\r\n            </el-dialog>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\n    import inOrderApi from '@/api/warehouse/InOrderApi'\r\n    import adminApi from '@/api/admin/Admin'\r\n\r\n    export default {\r\n        name: \"InOrder\",\r\n        data() {\r\n            return {\r\n                inOrderList: [],\r\n                page: 1,\r\n                limit: 5,\r\n                total: 0,\r\n                inOrderQueryVo: {\r\n                    goodsId: '',\r\n                    adminId: '',\r\n                    timeStart: '',\r\n                    timeEnd: ''\r\n                },\r\n                searchUsername: '',\r\n                detailOrder: {\r\n                    id: '',\r\n                    goodsId: '',\r\n                    number: 0,\r\n                    inTime: '',\r\n                    goodsName: '',\r\n                    img: '',\r\n                    adminUsername: '',\r\n                    adminId: ''\r\n                },\r\n                detailOrderVisible: false,\r\n                adminList: []\r\n            }\r\n        },\r\n        created() {\r\n            this.pageFind()\r\n        },\r\n        methods: {\r\n            pageFind() {   // 分页条件查找商品信息\r\n                let timeStart = this.inOrderQueryVo.timeStart\r\n                let timeEnd = this.inOrderQueryVo.timeEnd\r\n\r\n                if (timeStart && timeEnd) {\r\n                    let start = new Date(timeStart)\r\n                    let end = new Date(timeEnd)\r\n                    if (start > end) {\r\n                        this.$message.error('时间范围错误！')\r\n                        return\r\n                    }\r\n                }\r\n\r\n                inOrderApi.pageFind(this.page, this.limit, this.inOrderQueryVo).then(resp => {\r\n                    this.inOrderList = resp.data.data.data\r\n                    this.total = resp.data.data.total\r\n                })\r\n            },\r\n            handleSizeChange(limit) {  // 页数发生变化\r\n                this.limit = limit\r\n                this.pageFind()\r\n            },\r\n            handleCurrentChange(page) {  // 当前页发生变化\r\n                this.page = page\r\n                this.pageFind()\r\n            },\r\n            deleteInOrder(inOrder) {  // 删除入库记录\r\n                this.$confirm('此操作将永久删除[' + inOrder.id + ']入库订单信息, 是否继续?', '提示', {\r\n                    confirmButtonText: '确定',\r\n                    cancelButtonText: '取消',\r\n                    type: 'warning'\r\n                }).then(() => {\r\n                    inOrderApi.deleteById(inOrder.id).then(resp => {\r\n                        if (resp.data.code == 200) {\r\n                            this.pageFind()\r\n                        } else {\r\n                            this.$message.error('服务器开了点小差！')\r\n                        }\r\n                    })\r\n                }).catch(() => {\r\n                    this.$message({\r\n                        type: 'info',\r\n                        message: '已取消删除'\r\n                    })\r\n                })\r\n            },\r\n            showDetailOrder(detailOrder) {  // 展示入库订单详细信息\r\n                Object.assign(this.detailOrder, detailOrder)\r\n                this.detailOrderVisible = true\r\n            },\r\n            exportExcel() {  // 将选中的数据进行导出\r\n                this.$confirm('此操作将导出' + this.total + '条数据, 是否继续?', '提示', {\r\n                    confirmButtonText: '确定',\r\n                    cancelButtonText: '取消',\r\n                    type: 'warning'\r\n                }).then(() => {\r\n                    // todo 导出表格\r\n                }).catch(() => {\r\n                    this.$message({\r\n                        type: 'info',\r\n                        message: '已取消数据导出'\r\n                    })\r\n                })\r\n            },\r\n            listAdminByRoleId(roleId = 2) {  // 通过角色获取所有管理员的信息\r\n                adminApi.listAdminByRoleId(roleId).then(resp => {\r\n                    this.adminList = resp.data.data\r\n                    this.adminList.push({id: null, name: '全部', username: '全部'})\r\n                })\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n    .in-order-body {\r\n        width: 100%;\r\n        height: 700px;\r\n    }\r\n\r\n    .in-order-header {\r\n        height: 70px;\r\n    }\r\n\r\n    .in-order-header > div {\r\n        float: left;\r\n        padding-right: 50px;\r\n    }\r\n\r\n    .in-order-search {\r\n        float: left;\r\n        padding-left: 5px;\r\n    }\r\n\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}