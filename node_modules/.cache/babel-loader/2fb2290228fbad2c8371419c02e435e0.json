{"ast":null,"code":"import goodsApi from '@/api/warehouse/GoodsApi';\nimport provinceApi from '@/api/cmn/ProvinceApi';\nimport cityApi from '@/api/cmn/CityApi';\nimport countyApi from '@/api/cmn/CountyApi';\nexport default {\n  name: \"Goods\",\n\n  data() {\n    return {\n      page: 1,\n      // 查询第几页\n      limit: 5,\n      // 每条记录数\n      goodsQueryVo: {\n        // 商品条件查询对象\n        province: null,\n        city: null,\n        county: null,\n        name: \"\",\n        priceStart: null,\n        priceEnd: null\n      },\n      goodsVo: {\n        // 添加商品数据 vo 对象\n        province: null,\n        city: null,\n        county: null,\n        name: null,\n        price: null,\n        img: '',\n        description: ''\n      },\n      goodsList: [],\n      total: 0,\n      provinces: [],\n      cities: [],\n      counties: [],\n      addGoodsVisible: false\n    };\n  },\n\n  created() {\n    this.initGoods();\n  },\n\n  methods: {\n    initGoods() {\n      // 初始化页面函数\n      this.pageFindGoods();\n      this.getAllProvinces();\n    },\n\n    pageFindGoods() {\n      // 分页查找商品信息\n      goodsApi.pageFind(this.page, this.limit, this.goodsQueryVo).then(resp => {\n        this.goodsList = resp.data.data.records;\n        this.total = resp.data.data.total;\n      });\n    },\n\n    getAllProvinces() {\n      // 获取所有省\n      provinceApi.getAllProvinces().then(resp => {\n        this.provinces = resp.data.data;\n      });\n    },\n\n    getAllCitiesByParentId() {\n      // 获取省下所有市\n      this.goodsQueryVo.city = null;\n      this.goodsQueryVo.county = null;\n      this.cities = [];\n      this.counties = [];\n      cityApi.getAllCitiesByParentId(this.goodsQueryVo.province).then(resp => {\n        this.cities = resp.data.data;\n      });\n    },\n\n    getCountiesByParentId() {\n      // 获取市下所有区县\n      this.goodsQueryVo.county = null;\n      this.counties = [];\n      countyApi.getCountiesByParentId(this.goodsQueryVo.city).then(resp => {\n        this.counties = resp.data.data;\n      });\n    },\n\n    handleSizeChange(limit) {\n      // 一页数量修改\n      this.limit = limit;\n      this.pageFindGoods();\n    },\n\n    handleCurrentChange(page) {\n      // 页码数量修改\n      this.page = page;\n      this.pageFindGoods();\n    },\n\n    showAddGoodsVisible() {\n      // 打开对话框\n      this.addGoodsVisible = true;\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA+MA;AACA;AACA;AACA;AAEA;EACAA,aADA;;EAEAC;IACA;MACAC,OADA;MACA;MACAC,QAFA;MAEA;MACAC;QAAA;QACAC,cADA;QAEAC,UAFA;QAGAC,YAHA;QAIAP,QAJA;QAKAQ,gBALA;QAMAC;MANA,CAHA;MAWAC;QAAA;QACAL,cADA;QAEAC,UAFA;QAGAC,YAHA;QAIAP,UAJA;QAKAW,WALA;QAMAC,OANA;QAOAC;MAPA,CAXA;MAoBAC,aApBA;MAqBAC,QArBA;MAsBAC,aAtBA;MAuBAC,UAvBA;MAwBAC,YAxBA;MAyBAC;IAzBA;EA2BA,CA9BA;;EA+BAC;IACA;EACA,CAjCA;;EAkCAC;IACAC;MAAA;MACA;MACA;IACA,CAJA;;IAKAC;MAAA;MACAC;QACA;QACA;MACA,CAHA;IAIA,CAVA;;IAWAC;MAAA;MAEAC;QACA;MACA,CAFA;IAGA,CAhBA;;IAiBAC;MAAA;MACA;MACA;MACA;MACA;MACAC;QACA;MACA,CAFA;IAGA,CAzBA;;IA0BAC;MAAA;MACA;MACA;MACAC;QACA;MACA,CAFA;IAGA,CAhCA;;IAiCAC;MAAA;MACA;MACA;IACA,CApCA;;IAqCAC;MAAA;MACA;MACA;IACA,CAxCA;;IAyCAC;MAAA;MACA;IACA;;EA3CA;AAlCA","names":["name","data","page","limit","goodsQueryVo","province","city","county","priceStart","priceEnd","goodsVo","price","img","description","goodsList","total","provinces","cities","counties","addGoodsVisible","created","methods","initGoods","pageFindGoods","goodsApi","getAllProvinces","provinceApi","getAllCitiesByParentId","cityApi","getCountiesByParentId","countyApi","handleSizeChange","handleCurrentChange","showAddGoodsVisible"],"sourceRoot":"src/views/warehouse","sources":["Goods.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <div style=\"height: 70px\">\r\n\r\n            <!-- 顶部操作栏位 -->\r\n            <div style=\"float:left;\">\r\n                <el-button type=\"success\" plain @click=\"showAddGoodsVisible\">添加商品</el-button>\r\n            </div>\r\n            <div style=\"float:left;padding-left: 40px\">\r\n                <div style=\"float: left\">\r\n                    <el-input v-model=\"goodsQueryVo.name\" placeholder=\"请输入商品名称\"></el-input>\r\n                </div>\r\n                <div style=\"float: left;width: 100px;padding-left: 5px\">\r\n                    <el-select v-model=\"goodsQueryVo.province\" placeholder=\"选择省\" @change=\"getAllCitiesByParentId()\">\r\n                        <el-option\r\n                                v-for=\"item in provinces\"\r\n                                :key=\"item.id\"\r\n                                :label=\"item.value\"\r\n                                :value=\"item.id\">\r\n                        </el-option>\r\n                    </el-select>\r\n                </div>\r\n                <div style=\"float: left;width: 100px;padding-left: 5px\">\r\n                    <el-select v-model=\"goodsQueryVo.city\" :disabled=\"!goodsQueryVo.province\" placeholder=\"选择市\"\r\n                               @change=\"getCountiesByParentId\">\r\n                        <el-option\r\n                                v-for=\"item in cities\"\r\n                                :key=\"item.id\"\r\n                                :label=\"item.value\"\r\n                                :value=\"item.id\">\r\n                        </el-option>\r\n                    </el-select>\r\n                </div>\r\n                <div style=\"float: left;width: 100px;padding-left: 5px\">\r\n                    <el-select v-model=\"goodsQueryVo.county\" :disabled=\"!goodsQueryVo.city\" placeholder=\"选择区\">\r\n                        <el-option\r\n                                v-for=\"item in counties\"\r\n                                :key=\"item.id\"\r\n                                :label=\"item.value\"\r\n                                :value=\"item.id\">\r\n                        </el-option>\r\n                    </el-select>\r\n                </div>\r\n                <div style=\"float:left;padding-left: 10px;width: 130px\">\r\n                    <el-input v-model=\"goodsQueryVo.priceStart\" placeholder=\"起始价格\"></el-input>\r\n                </div>\r\n                <div style=\"float:left;padding-left: 10px;width: 130px\">\r\n                    <el-input v-model=\"goodsQueryVo.priceEnd\" placeholder=\"终止价格\"></el-input>\r\n                </div>\r\n                <div style=\"float: left; padding-left: 10px\">\r\n                    <el-button type=\"primary\" plain icon=\"el-icon-search\" @click=\"pageFindGoods\"></el-button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- 查询得到的商品展示栏位 -->\r\n        <div>\r\n            <template>\r\n                <el-table\r\n                        :data=\"goodsList\"\r\n                        stripe\r\n                        height=\"700px\"\r\n                        style=\"width: 100%\">\r\n                    <el-table-column\r\n                            label=\"图片\"\r\n                            width=\"280\">\r\n                        <template slot-scope=\"scope\">\r\n                            <img :src=\"scope.row.img\" width=\"100px\" height=\"100px\">\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"name\"\r\n                            label=\"名称\"\r\n                            width=\"180\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"number\"\r\n                            label=\"数量/个\"\r\n                            width=\"100\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"price\"\r\n                            label=\"价格/元\"\r\n                            width=\"100\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"description\"\r\n                            label=\"描述\"\r\n                            width=\"340\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            label=\"操作\"\r\n                            width=\"300\">\r\n                        <template slot-scope=\"scope\">\r\n                            <el-button type=\"primary\" round>详细信息</el-button>\r\n                            <el-button type=\"danger\" round>销毁</el-button>\r\n                            <el-button v-if=\"scope.row.state\" type=\"success\" round>上架</el-button>\r\n                            <el-button v-if=\"!scope.row.state\" type=\"warning\" round>下架</el-button>\r\n                        </template>\r\n                    </el-table-column>\r\n                </el-table>\r\n            </template>\r\n        </div>\r\n\r\n        <!-- 分页功能部位 -->\r\n        <div>\r\n            <div class=\"block\">\r\n                <el-pagination\r\n                        @size-change=\"handleSizeChange\"\r\n                        @current-change=\"handleCurrentChange\"\r\n                        :page-sizes=\"[5, 10, 15, 20]\"\r\n                        :page-size=\"5\"\r\n                        layout=\"total, sizes, prev, pager, next, jumper\"\r\n                        :total=\"total\">\r\n                </el-pagination>\r\n            </div>\r\n        </div>\r\n        <div>\r\n            <el-dialog title=\"商品信息\" :visible.sync=\"addGoodsVisible\">\r\n                <el-form :model=\"goodsVo\">\r\n                    <el-row :gutter=\"20\">\r\n                        <el-col :span=\"6\">\r\n                            <div class=\"grid-content bg-purple\">\r\n                                <el-form-item label=\"商品名称\">\r\n                                    <el-input v-model=\"goodsVo.name\" autocomplete=\"off\"></el-input>\r\n                                </el-form-item>\r\n                            </div>\r\n                        </el-col>\r\n                        <el-col :span=\"18\">\r\n                            <div class=\"grid-content bg-purple\">\r\n                                <el-form-item label=\"商品描述\">\r\n                                    <el-input v-model=\"goodsVo.name\" autocomplete=\"off\"></el-input>\r\n                                </el-form-item>\r\n                            </div>\r\n                        </el-col>\r\n                        <el-col :span=\"6\">\r\n                            <div class=\"grid-content bg-purple\">\r\n                                <el-form-item label=\"省份\">\r\n                                    <el-select v-model=\"goodsVo.province\" placeholder=\"请选择\">\r\n                                        <el-option\r\n                                                v-for=\"item in provinces\"\r\n                                                :key=\"item.id\"\r\n                                                :label=\"item.value\"\r\n                                                :value=\"item.id\">\r\n                                        </el-option>\r\n                                    </el-select>\r\n                                </el-form-item>\r\n                            </div>\r\n                        </el-col>\r\n                        <el-col :span=\"6\">\r\n                            <div class=\"grid-content bg-purple\">\r\n                                <el-form-item label=\"城市\">\r\n                                    <el-select v-model=\"goodsVo.city\" placeholder=\"请选择\">\r\n                                        <el-option\r\n                                                v-for=\"item in cities\"\r\n                                                :key=\"item.id\"\r\n                                                :label=\"item.value\"\r\n                                                :value=\"item.id\">\r\n                                        </el-option>\r\n                                    </el-select>\r\n                                </el-form-item>\r\n                            </div>\r\n                        </el-col>\r\n                        <el-col :span=\"6\">\r\n                            <div class=\"grid-content bg-purple\">\r\n                                <el-form-item label=\"区县\">\r\n                                    <el-select v-model=\"goodsVo.county\" placeholder=\"请选择\">\r\n                                        <el-option\r\n                                                v-for=\"item in counties\"\r\n                                                :key=\"item.id\"\r\n                                                :label=\"item.value\"\r\n                                                :value=\"item.id\">\r\n                                        </el-option>\r\n                                    </el-select>\r\n                                </el-form-item>\r\n                            </div>\r\n                        </el-col>\r\n                        <el-col :span=\"6\">\r\n                            <div class=\"grid-content bg-purple\">\r\n                                <el-form-item label=\"价格\">\r\n                                    <el-input v-model=\"goodsVo.price\" placeholder=\"请输入价格\"></el-input>\r\n                                </el-form-item>\r\n                            </div>\r\n                        </el-col>\r\n                        <el-col :span=\"6\">\r\n                            <div class=\"grid-content bg-purple\">\r\n                                <el-form-item label=\"图片\">\r\n                                </el-form-item>\r\n                            </div>\r\n                        </el-col>\r\n                    </el-row>\r\n\r\n                    <el-form-item label=\"活动区域\">\r\n\r\n                    </el-form-item>\r\n                </el-form>\r\n                <div slot=\"footer\" class=\"dialog-footer\">\r\n                    <el-button @click=\"addGoodsVisible = false\">取 消</el-button>\r\n                    <el-button type=\"primary\" @click=\"addGoodsVisible = false\">确 定</el-button>\r\n                </div>\r\n            </el-dialog>\r\n        </div>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import goodsApi from '@/api/warehouse/GoodsApi'\r\n    import provinceApi from '@/api/cmn/ProvinceApi'\r\n    import cityApi from '@/api/cmn/CityApi'\r\n    import countyApi from '@/api/cmn/CountyApi'\r\n\r\n    export default {\r\n        name: \"Goods\",\r\n        data() {\r\n            return {\r\n                page: 1,            // 查询第几页\r\n                limit: 5,           // 每条记录数\r\n                goodsQueryVo: {     // 商品条件查询对象\r\n                    province: null,\r\n                    city: null,\r\n                    county: null,\r\n                    name: \"\",\r\n                    priceStart: null,\r\n                    priceEnd: null\r\n                },\r\n                goodsVo: {          // 添加商品数据 vo 对象\r\n                    province: null,\r\n                    city: null,\r\n                    county: null,\r\n                    name: null,\r\n                    price: null,\r\n                    img: '',\r\n                    description: ''\r\n                },\r\n                goodsList: [],\r\n                total: 0,\r\n                provinces: [],\r\n                cities: [],\r\n                counties: [],\r\n                addGoodsVisible: false\r\n            }\r\n        },\r\n        created() {\r\n            this.initGoods()\r\n        },\r\n        methods: {\r\n            initGoods() {  // 初始化页面函数\r\n                this.pageFindGoods()\r\n                this.getAllProvinces()\r\n            },\r\n            pageFindGoods() {  // 分页查找商品信息\r\n                goodsApi.pageFind(this.page, this.limit, this.goodsQueryVo).then(resp => {\r\n                    this.goodsList = resp.data.data.records\r\n                    this.total = resp.data.data.total\r\n                })\r\n            },\r\n            getAllProvinces() {  // 获取所有省\r\n\r\n                provinceApi.getAllProvinces().then(resp => {\r\n                    this.provinces = resp.data.data\r\n                })\r\n            },\r\n            getAllCitiesByParentId() {  // 获取省下所有市\r\n                this.goodsQueryVo.city = null\r\n                this.goodsQueryVo.county = null\r\n                this.cities = []\r\n                this.counties = []\r\n                cityApi.getAllCitiesByParentId(this.goodsQueryVo.province).then(resp => {\r\n                    this.cities = resp.data.data\r\n                })\r\n            },\r\n            getCountiesByParentId() {  // 获取市下所有区县\r\n                this.goodsQueryVo.county = null\r\n                this.counties = []\r\n                countyApi.getCountiesByParentId(this.goodsQueryVo.city).then(resp => {\r\n                    this.counties = resp.data.data\r\n                })\r\n            },\r\n            handleSizeChange(limit) { // 一页数量修改\r\n                this.limit = limit\r\n                this.pageFindGoods()\r\n            },\r\n            handleCurrentChange(page) {  // 页码数量修改\r\n                this.page = page\r\n                this.pageFindGoods()\r\n            },\r\n            showAddGoodsVisible() {  // 打开对话框\r\n                this.addGoodsVisible = true\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}