{"ast":null,"code":"// 引入 axios\nimport axios from 'axios';\n/* 单独引入element-ui使用 */\n\nimport { Message } from 'element-ui';\nconst service = axios.create({\n  baseURL: 'http://192.168.195.130',\n  timeout: 15000 // 请求超时时间\n\n}); // 设置响应接口\n\naxios.interceptors.response.use(success => {\n  // 访问到了后端的接口，需要判断是否逻辑正确\n  if (success.status && success.status === 200) {\n    return;\n  }\n\n  return success.data; // 正常接收到结构 需要将对象返回\n}, error => {\n  // 直接错误响应，直接服务器都不让进行访问\n  console.log(error.url);\n\n  if (error.response.code === 500) {// 对应提示服务器错误\n  } // ...\n\n\n  return;\n});\naxios.interceptors.request.use(success => {\n  // 请求前查询是否包含 token 如果有 token 则携带 token\n  Message.success(window.sessionStorage.getItem('token'));\n\n  if (window.sessionStorage.getItem('token')) {\n    success.headers['Authorization'] = window.sessionStorage.getItem('token');\n  }\n\n  return success;\n}, error => {});\nexport default service;","map":{"version":3,"names":["axios","Message","service","create","baseURL","timeout","interceptors","response","use","success","status","data","error","console","log","url","code","request","window","sessionStorage","getItem","headers"],"sources":["D:/code/js/project/web-logistics/src/utils/request.js"],"sourcesContent":["// 引入 axios\r\nimport axios from 'axios'\r\n/* 单独引入element-ui使用 */\r\nimport {Message} from 'element-ui';\r\n\r\nconst service = axios.create({\r\n    baseURL: 'http://192.168.195.130',\r\n    timeout: 15000 // 请求超时时间\r\n})\r\n\r\n// 设置响应接口\r\naxios.interceptors.response.use(success => {  // 访问到了后端的接口，需要判断是否逻辑正确\r\n\r\n    if (success.status && success.status === 200) {\r\n        return\r\n    }\r\n\r\n    return success.data  // 正常接收到结构 需要将对象返回\r\n}, error => {   // 直接错误响应，直接服务器都不让进行访问\r\n\r\n    console.log(error.url)\r\n\r\n    if (error.response.code === 500) {\r\n        // 对应提示服务器错误\r\n    }\r\n    // ...\r\n\r\n    return\r\n})\r\n\r\naxios.interceptors.request.use(success => {\r\n    // 请求前查询是否包含 token 如果有 token 则携带 token\r\n    Message.success(window.sessionStorage.getItem('token'))\r\n\r\n    if (window.sessionStorage.getItem('token')) {\r\n        success.headers['Authorization'] = window.sessionStorage.getItem('token')\r\n    }\r\n\r\n    return success\r\n}, error => {\r\n})\r\n\r\nexport default service"],"mappings":"AAAA;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA;;AACA,SAAQC,OAAR,QAAsB,YAAtB;AAEA,MAAMC,OAAO,GAAGF,KAAK,CAACG,MAAN,CAAa;EACzBC,OAAO,EAAE,wBADgB;EAEzBC,OAAO,EAAE,KAFgB,CAEV;;AAFU,CAAb,CAAhB,C,CAKA;;AACAL,KAAK,CAACM,YAAN,CAAmBC,QAAnB,CAA4BC,GAA5B,CAAgCC,OAAO,IAAI;EAAG;EAE1C,IAAIA,OAAO,CAACC,MAAR,IAAkBD,OAAO,CAACC,MAAR,KAAmB,GAAzC,EAA8C;IAC1C;EACH;;EAED,OAAOD,OAAO,CAACE,IAAf,CANuC,CAMlB;AACxB,CAPD,EAOGC,KAAK,IAAI;EAAI;EAEZC,OAAO,CAACC,GAAR,CAAYF,KAAK,CAACG,GAAlB;;EAEA,IAAIH,KAAK,CAACL,QAAN,CAAeS,IAAf,KAAwB,GAA5B,EAAiC,CAC7B;EACH,CANO,CAOR;;;EAEA;AACH,CAjBD;AAmBAhB,KAAK,CAACM,YAAN,CAAmBW,OAAnB,CAA2BT,GAA3B,CAA+BC,OAAO,IAAI;EACtC;EACAR,OAAO,CAACQ,OAAR,CAAgBS,MAAM,CAACC,cAAP,CAAsBC,OAAtB,CAA8B,OAA9B,CAAhB;;EAEA,IAAIF,MAAM,CAACC,cAAP,CAAsBC,OAAtB,CAA8B,OAA9B,CAAJ,EAA4C;IACxCX,OAAO,CAACY,OAAR,CAAgB,eAAhB,IAAmCH,MAAM,CAACC,cAAP,CAAsBC,OAAtB,CAA8B,OAA9B,CAAnC;EACH;;EAED,OAAOX,OAAP;AACH,CATD,EASGG,KAAK,IAAI,CACX,CAVD;AAYA,eAAeV,OAAf"},"metadata":{},"sourceType":"module"}