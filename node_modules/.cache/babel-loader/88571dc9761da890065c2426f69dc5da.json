{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport codeApi from '@/api/api/Code';\nimport loginApi from '@/api/Login';\nexport default {\n  name: \"Login\",\n\n  data() {\n    let validatePass = (rule, value, callback) => {\n      if (!value) {\n        return callback(new Error('密码不能为空'));\n      }\n    };\n\n    let validateName = (rule, value, callback) => {\n      if (!value) {\n        return callback(new Error('用户名不能为空！'));\n      }\n    };\n\n    let validatePhone = (rule, value, callback) => {\n      if (!value) {\n        return callback(new Error('手机号码不能为空'));\n      } // todo 手机号码验证\n\n    };\n\n    let validateCode = (rule, value, callback) => {\n      if (!value) {\n        return callback(new Error('验证码不能为空！'));\n      }\n    };\n\n    return {\n      loginForm: {\n        username: '666',\n        password: '666'\n      },\n      phoneForm: {\n        phone: '',\n        // 手机号\n        code: '' // 验证码\n\n      },\n      phoneRules: {\n        phone: [{\n          validator: validatePhone,\n          trigger: 'blur'\n        }],\n        code: [{\n          validator: validateCode,\n          trigger: 'blur'\n        }]\n      },\n      rules: {\n        pass: [{\n          validator: validatePass,\n          trigger: 'blur'\n        }],\n        username: [{\n          validator: validateName,\n          trigger: 'blur'\n        }]\n      },\n      loginMethod: 'password',\n      codeBtn: '获取',\n      codeBtnDisable: false\n    };\n  },\n\n  created() {},\n\n  methods: {\n    loginByPass() {\n      // 使用密码方式进行登录\n      this.$router.replace('/home');\n    },\n\n    loginByPhone(formName) {\n      // 使用手机方式进行登录\n      this.$refs[formName].validate(valid => {\n        if (valid) {\n          alert('submit!');\n        } else {\n          console.log('error submit!!');\n          return false;\n        }\n      });\n      loginApi.loginByPhone(this.phoneForm).then(resp => {\n        if (resp.data.code == 200) {\n          this.sessionStorage.setItem('token', resp.data.data);\n          this.$message.success('登录成功！');\n          this.$router.replace('/home');\n        } else {\n          this.$message.error('验证码不正确！');\n        }\n      });\n    },\n\n    requestCode() {\n      // 请求验证码\n      if (!this.phoneForm.phone) {\n        this.$message.error('请输入手机号码');\n        return;\n      }\n\n      if (false) {\n        // 手机号码验证\n        return;\n      }\n\n      codeApi.createCode(this.phoneForm.phone).then(resp => {\n        if (resp.data.code == 200) {\n          this.$message.success(resp.data.msg); // 成功获取验证码\n        } else {\n          this.$message.warning(resp.data.msg); // 获取验证码失败\n        }\n      });\n      this.codeBtn = 60;\n      this.codeBtnDisable = true;\n      let internalTimer = setInterval(() => {\n        if (0 !== this.codeBtn) {\n          this.codeBtn--;\n        } else {\n          this.codeBtn = '获取';\n          this.codeBtnDisable = false;\n          clearInterval(internalTimer);\n        }\n      }, 1000);\n    },\n\n    switchToPhone() {\n      // 切换手机登录方式\n      this.loginMethod = 'phone';\n    },\n\n    switchToPass() {\n      // 切换账号密码登录方式\n      this.loginMethod = 'password';\n    }\n\n  }\n};","map":{"version":3,"mappings":";AAsDA;AACA;AAEA;EACAA,aADA;;EAEAC;IACA;MACA;QACA;MACA;IACA,CAJA;;IAMA;MACA;QACA;MACA;IACA,CAJA;;IAMA;MACA;QACA;MACA,CAHA,CAKA;;IACA,CANA;;IAQA;MACA;QACA;MACA;IACA,CAJA;;IAMA;MACAC;QACAC,eADA;QAEAC;MAFA,CADA;MAKAC;QACAC,SADA;QACA;QACAC,QAFA,CAEA;;MAFA,CALA;MASAC;QACAF,QACA;UAAAG;UAAAC;QAAA,CADA,CADA;QAIAH,OACA;UAAAE;UAAAC;QAAA,CADA;MAJA,CATA;MAiBAC;QACAC,OACA;UAAAH;UAAAC;QAAA,CADA,CADA;QAIAP,WACA;UAAAM;UAAAC;QAAA,CADA;MAJA,CAjBA;MAyBAG,uBAzBA;MA0BAC,aA1BA;MA2BAC;IA3BA;EA6BA,CA1DA;;EA2DAC,WAEA,CA7DA;;EA8DAC;IACAC;MAAA;MACA;IACA,CAHA;;IAIAC;MAAA;MACA;QACA;UACAC;QACA,CAFA,MAEA;UACAC;UACA;QACA;MACA,CAPA;MASAC;QACA;UACA;UACA;UACA;QACA,CAJA,MAIA;UACA;QACA;MACA,CARA;IASA,CAvBA;;IAwBAC;MAAA;MACA;QACA;QACA;MACA;;MACA;QAAA;QACA;MACA;;MAEAC;QACA;UACA,qCADA,CACA;QACA,CAFA,MAEA;UACA,qCADA,CACA;QACA;MACA,CANA;MAOA;MACA;MACA;QACA;UACA;QACA,CAFA,MAEA;UACA;UACA;UACAC;QACA;MACA,CARA,EAQA,IARA;IAUA,CApDA;;IAqDAC;MAAA;MACA;IACA,CAvDA;;IAwDAC;MAAA;MACA;IACA;;EA1DA;AA9DA","names":["name","data","loginForm","username","password","phoneForm","phone","code","phoneRules","validator","trigger","rules","pass","loginMethod","codeBtn","codeBtnDisable","created","methods","loginByPass","loginByPhone","alert","console","loginApi","requestCode","codeApi","clearInterval","switchToPhone","switchToPass"],"sourceRoot":"src/views","sources":["Login.vue"],"sourcesContent":["<template>\r\n    <div class=\"login-body\">\r\n        <div class=\"header-container\">\r\n            <div class=\"sys-log\">\r\n                物流管理系统\r\n            </div>\r\n        </div>\r\n        <div class=\"login-class\">\r\n            <div class=\"login-by-password\">\r\n                <div v-if=\"loginMethod === 'password'\">\r\n                    <div>\r\n                        <el-form :model=\"loginForm\" status-icon :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\"\r\n                                 class=\"demo-ruleForm\">\r\n                            <el-form-item label=\"用户名\" prop=\"username\">\r\n                                <el-input type=\"text\" v-model=\"loginForm.username\" max=\"50px\"></el-input>\r\n                            </el-form-item>\r\n                            <el-form-item label=\"密码\" prop=\"pass\">\r\n                                <el-input type=\"password\" v-model=\"loginForm.password\"></el-input>\r\n                            </el-form-item>\r\n                            <el-form-item>\r\n                                <el-button type=\"success\" @click=\"loginByPass\">登录</el-button>\r\n                                <el-button type=\"info\" @click=\"switchToPhone\" style=\"width: 112px\">手机号登录</el-button>\r\n                            </el-form-item>\r\n                        </el-form>\r\n                    </div>\r\n                </div>\r\n                <div v-if=\"loginMethod === 'phone'\">\r\n                    <div>\r\n                        <el-form :model=\"phoneForm\" status-icon :rules=\"phoneRules\" ref=\"ruleForm\" label-width=\"100px\"\r\n                                 class=\"demo-ruleForm\">\r\n                            <el-form-item label=\"手机号\" prop=\"phone\" class=\"\">\r\n                                <el-input type=\"text\" v-model=\"phoneForm.phone\"></el-input>\r\n                            </el-form-item>\r\n                            <el-form-item label=\"验证码\" prop=\"code\">\r\n                                <el-input type=\"text\" v-model=\"phoneForm.code\"\r\n                                          style=\"width: 120px; margin-right: 10px\"></el-input>\r\n                                <el-button type=\"success\" @click=\"requestCode\" style=\"width: 70px\"\r\n                                           :disabled=\"codeBtnDisable\">{{codeBtn}}\r\n                                </el-button>\r\n                            </el-form-item>\r\n                            <el-form-item>\r\n                                <el-button type=\"success\" @click=\"loginByPhone('ruleForm')\">登录</el-button>\r\n                                <el-button type=\"info\" @click=\"switchToPass\" style=\"width: 112px\">密码登录</el-button>\r\n                            </el-form-item>\r\n                        </el-form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\n    import codeApi from '@/api/api/Code'\r\n    import loginApi from '@/api/Login'\r\n\r\n    export default {\r\n        name: \"Login\",\r\n        data() {\r\n            let validatePass = (rule, value, callback) => {\r\n                if (!value) {\r\n                    return callback(new Error('密码不能为空'));\r\n                }\r\n            }\r\n\r\n            let validateName = (rule, value, callback) => {\r\n                if (!value) {\r\n                    return callback(new Error('用户名不能为空！'))\r\n                }\r\n            }\r\n\r\n            let validatePhone = (rule, value, callback) => {\r\n                if (!value) {\r\n                    return callback(new Error('手机号码不能为空'))\r\n                }\r\n\r\n                // todo 手机号码验证\r\n            }\r\n\r\n            let validateCode = (rule, value, callback) => {\r\n                if (!value) {\r\n                    return callback(new Error('验证码不能为空！'))\r\n                }\r\n            }\r\n\r\n            return {\r\n                loginForm: {\r\n                    username: '666',\r\n                    password: '666'\r\n                },\r\n                phoneForm: {\r\n                    phone: '',  // 手机号\r\n                    code: ''  // 验证码\r\n                },\r\n                phoneRules: {\r\n                    phone: [\r\n                        {validator: validatePhone, trigger: 'blur'}\r\n                    ],\r\n                    code: [\r\n                        {validator: validateCode, trigger: 'blur'}\r\n                    ]\r\n                },\r\n                rules: {\r\n                    pass: [\r\n                        {validator: validatePass, trigger: 'blur'}\r\n                    ],\r\n                    username: [\r\n                        {validator: validateName, trigger: 'blur'}\r\n                    ]\r\n                },\r\n                loginMethod: 'password',\r\n                codeBtn: '获取',\r\n                codeBtnDisable: false\r\n            }\r\n        },\r\n        created() {\r\n\r\n        },\r\n        methods: {\r\n            loginByPass() {  // 使用密码方式进行登录\r\n                this.$router.replace('/home')\r\n            },\r\n            loginByPhone(formName) {  // 使用手机方式进行登录\r\n                this.$refs[formName].validate((valid) => {\r\n                    if (valid) {\r\n                        alert('submit!');\r\n                    } else {\r\n                        console.log('error submit!!');\r\n                        return false\r\n                    }\r\n                })\r\n\r\n                loginApi.loginByPhone(this.phoneForm).then(resp => {\r\n                    if (resp.data.code == 200) {\r\n                        this.sessionStorage.setItem('token', resp.data.data)\r\n                        this.$message.success('登录成功！')\r\n                        this.$router.replace('/home')\r\n                    } else {\r\n                        this.$message.error('验证码不正确！')\r\n                    }\r\n                })\r\n            },\r\n            requestCode() {  // 请求验证码\r\n                if (!this.phoneForm.phone) {\r\n                    this.$message.error('请输入手机号码')\r\n                    return\r\n                }\r\n                if (false) {   // 手机号码验证\r\n                    return\r\n                }\r\n\r\n                codeApi.createCode(this.phoneForm.phone).then(resp => {\r\n                    if (resp.data.code == 200) {\r\n                        this.$message.success(resp.data.msg)  // 成功获取验证码\r\n                    } else {\r\n                        this.$message.warning(resp.data.msg)  // 获取验证码失败\r\n                    }\r\n                })\r\n                this.codeBtn = 60\r\n                this.codeBtnDisable = true\r\n                let internalTimer = setInterval(() => {\r\n                    if (0 !== this.codeBtn) {\r\n                        this.codeBtn--\r\n                    } else {\r\n                        this.codeBtn = '获取'\r\n                        this.codeBtnDisable = false\r\n                        clearInterval(internalTimer)\r\n                    }\r\n                }, 1000)\r\n\r\n            },\r\n            switchToPhone() {  // 切换手机登录方式\r\n                this.loginMethod = 'phone'\r\n            },\r\n            switchToPass() {  // 切换账号密码登录方式\r\n                this.loginMethod = 'password'\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n    .login-body {\r\n        background-color: #f3f6f1;\r\n        height: 975px;\r\n    }\r\n\r\n    .header-container {\r\n        height: 80px;\r\n        background-color: #7cb6aa;\r\n    }\r\n\r\n    .sys-log {\r\n        font-family: 华文楷体;\r\n        font-size: 50px;\r\n        float: left;\r\n        color: #303133;\r\n    }\r\n\r\n    .login-class {\r\n        padding-top: 200px;\r\n    }\r\n\r\n    .login-by-password {\r\n        height: 300px;\r\n        width: 400px;\r\n        padding-top: 50px;\r\n        margin: auto;\r\n        background-color: #e1f3d8;\r\n        border-radius: 30px;\r\n    }\r\n\r\n    .login-by-password > div {\r\n        height: 300px;\r\n        width: 300px;\r\n    }\r\n</style>"]},"metadata":{},"sourceType":"module"}