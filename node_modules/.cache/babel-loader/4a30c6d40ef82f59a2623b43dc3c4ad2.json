{"ast":null,"code":"import CarManage from \"@/api/dispatcher/CarManage\";\nexport default {\n  name: \"CarManage\",\n\n  data() {\n    return {\n      haveCar: false,\n      car: {\n        // 司机拥有车辆时车辆的信息\n        id: '',\n        carId: '',\n        name: '',\n        startUseTime: '',\n        useTime: ''\n      },\n      carPageParams: {\n        // 条件查询车辆信息\n        name: '',\n        startTime: '',\n        endTime: '',\n        isDispatch: false\n      },\n      cars: [],\n      page: 1,\n      limit: 5,\n      total: 0\n    };\n  },\n\n  created() {\n    this.getCar();\n  },\n\n  methods: {\n    getCar() {\n      // 司机获取车辆的信息\n      CarManage.getCar().then(resp => {\n        if (resp.data.code === 200) {\n          if (resp.data.data) {\n            this.haveCar = true;\n            this.car = resp.data.data;\n          }\n\n          return;\n        }\n\n        this.$message.error(resp.data.msg);\n      });\n    },\n\n    dissolveRelationship() {\n      // 司机解除其和车辆的关系\n      CarManage.dissolveRelationship(this.car.id).then(resp => {\n        if (resp.data.code === 200) {\n          this.$message.success(resp.data.msg);\n          this.getCar();\n          return;\n        }\n\n        this.$message.error(resp.data.msg);\n      });\n    },\n\n    handleSizeChange(limit) {\n      this.limit = limit;\n      this.pageFind();\n    },\n\n    handleCurrentChange(page) {\n      this.page = page;\n      this.pageFind();\n    },\n\n    pageFind() {}\n\n  }\n};","map":{"version":3,"mappings":"AAqFA;AAEA;EACAA,iBADA;;EAEAC;IACA;MACAC,cADA;MAEAC;QAAA;QACAC,MADA;QAEAC,SAFA;QAGAL,QAHA;QAIAM,gBAJA;QAKAC;MALA,CAFA;MASAC;QAAA;QACAR,QADA;QAEAS,aAFA;QAGAC,WAHA;QAIAC;MAJA,CATA;MAeAC,QAfA;MAgBAC,OAhBA;MAiBAC,QAjBA;MAkBAC;IAlBA;EAoBA,CAvBA;;EAuBAC;IACA;EACA,CAzBA;;EAyBAC;IACAC;MAAA;MACAC;QACA;UACA;YACA;YACA;UACA;;UACA;QACA;;QAEA;MACA,CAVA;IAWA,CAbA;;IAcAC;MAAA;MACAD;QACA;UACA;UACA;UACA;QACA;;QAEA;MACA,CARA;IASA,CAxBA;;IAyBAE;MACA;MACA;IACA,CA5BA;;IA6BAC;MACA;MACA;IACA,CAhCA;;IAiCAC,YAEA;;EAnCA;AAzBA","names":["name","data","haveCar","car","id","carId","startUseTime","useTime","carPageParams","startTime","endTime","isDispatch","cars","page","limit","total","created","methods","getCar","CarManage","dissolveRelationship","handleSizeChange","handleCurrentChange","pageFind"],"sourceRoot":"src/views/dispatcher","sources":["CarManage.vue"],"sourcesContent":["<template>\r\n    <div>\r\n\r\n        <!-- 已经分配了车辆 -->\r\n        <div v-if=\"haveCar\">\r\n            <div>\r\n                <el-descriptions class=\"margin-top\" :column=\"3\" :size=\"size\" border>\r\n                    <template slot=\"extra\">\r\n                        <el-button type=\"danger\" plain size=\"small\">维修</el-button>\r\n                        <el-button type=\"danger\" plain size=\"small\" @click=\"dissolveRelationship\">解除使用</el-button>\r\n                    </template>\r\n                    <el-descriptions-item>\r\n                        <template slot=\"label\">\r\n                            <i class=\"el-icon-user\"></i>\r\n                            车辆编号\r\n                        </template>\r\n                        {{car.id}}\r\n                    </el-descriptions-item>\r\n                    <el-descriptions-item>\r\n                        <template slot=\"label\">\r\n                            <i class=\"el-icon-user\"></i>\r\n                            车辆牌照\r\n                        </template>\r\n                        {{car.carId}}\r\n                    </el-descriptions-item>\r\n                    <el-descriptions-item>\r\n                        <template slot=\"label\">\r\n                            <i class=\"el-icon-user\"></i>\r\n                            车辆名称\r\n                        </template>\r\n                        {{car.name}}\r\n                    </el-descriptions-item>\r\n                    <el-descriptions-item>\r\n                        <template slot=\"label\">\r\n                            <i class=\"el-icon-user\"></i>\r\n                            开始使用时间\r\n                        </template>\r\n                        {{car.startUseTime}}\r\n                    </el-descriptions-item>\r\n                    <el-descriptions-item>\r\n                        <template slot=\"label\">\r\n                            <i class=\"el-icon-user\"></i>\r\n                            累计使用天数\r\n                        </template>\r\n                        {{car.useTime}}\r\n                    </el-descriptions-item>\r\n                </el-descriptions>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- 没有分配车辆 -->\r\n        <div v-if=\"!haveCar\">\r\n            <div style=\"height: 60px\">\r\n                <div style=\"float:left;\">\r\n                    <el-pagination\r\n                            @size-change=\"handleSizeChange\"\r\n                            @current-change=\"handleCurrentChange\"\r\n                            :page-sizes=\"[5, 10, 20, 40]\"\r\n                            :page-size=\"limit\"\r\n                            layout=\"total, sizes, prev, pager, next, jumper\"\r\n                            :total=\"total\">\r\n                    </el-pagination>\r\n                </div>\r\n            </div>\r\n\r\n            <div>\r\n                <template>\r\n                    <el-table\r\n                            :data=\"cars\"\r\n                            style=\"width: 100%\">\r\n                        <el-table-column\r\n                                prop=\"date\"\r\n                                label=\"日期\"\r\n                                width=\"180\">\r\n                        </el-table-column>\r\n                    </el-table>\r\n                </template>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\n    import CarManage from \"@/api/dispatcher/CarManage\"\r\n\r\n    export default {\r\n        name: \"CarManage\",\r\n        data() {\r\n            return {\r\n                haveCar: false,\r\n                car: {    // 司机拥有车辆时车辆的信息\r\n                    id: '',\r\n                    carId: '',\r\n                    name: '',\r\n                    startUseTime: '',\r\n                    useTime: ''\r\n                },\r\n                carPageParams: {   // 条件查询车辆信息\r\n                    name: '',\r\n                    startTime: '',\r\n                    endTime: '',\r\n                    isDispatch: false\r\n                },\r\n                cars: [],\r\n                page: 1,\r\n                limit: 5,\r\n                total: 0,\r\n            }\r\n        }, created() {\r\n            this.getCar()\r\n        }, methods: {\r\n            getCar() {   // 司机获取车辆的信息\r\n                CarManage.getCar().then(resp => {\r\n                    if (resp.data.code === 200) {\r\n                        if (resp.data.data) {\r\n                            this.haveCar = true\r\n                            this.car = resp.data.data\r\n                        }\r\n                        return\r\n                    }\r\n\r\n                    this.$message.error(resp.data.msg)\r\n                })\r\n            },\r\n            dissolveRelationship() {   // 司机解除其和车辆的关系\r\n                CarManage.dissolveRelationship(this.car.id).then(resp => {\r\n                    if (resp.data.code === 200) {\r\n                        this.$message.success(resp.data.msg)\r\n                        this.getCar()\r\n                        return\r\n                    }\r\n\r\n                    this.$message.error(resp.data.msg)\r\n                })\r\n            },\r\n            handleSizeChange(limit) {\r\n                this.limit = limit\r\n                this.pageFind()\r\n            },\r\n            handleCurrentChange(page) {\r\n                this.page = page\r\n                this.pageFind()\r\n            },\r\n            pageFind() {\r\n\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}